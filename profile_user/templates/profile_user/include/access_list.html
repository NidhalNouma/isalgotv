{% if not user_profile.tradingview_username and has_subscription %}
  {% include 'include/warnings.html' with warning='No tradingview username found. share your tradingview username below to get access.' %}

  {% include 'include/home_get_started_tv_username.html' %}
{% else %}
  <section class="space-y-4">
    {% if user_profile.tradingview_username %}
      <h6 class="text-text text-sm">
        TradingView Username:
        <a href="{% url 'settings' %}" class="btn-a font-semibold">{{ user_profile.tradingview_username }}</a>
      </h6>
    {% endif %}

    <!-- Tabs Navigation -->
    <div class="mb-4">
      <nav class="flex gap-2 overflow-x-auto no-scrollbar" role="tablist">
        <button class="tab-button transition-all hover:opacity-80 active" data-tab="free" role="tab" onclick="switchTab('free')">{% include 'strategies/include/strategy_badge.html' with type='Free' %}</button>

        <button class="tab-button transition-all hover:opacity-80" data-tab="premium" role="tab" onclick="switchTab('premium')">{% include 'strategies/include/strategy_badge.html' with type='Premium' %}</button>

        <button class="tab-button transition-all hover:opacity-80" data-tab="beta" role="tab" onclick="switchTab('beta')">{% include 'strategies/include/strategy_badge.html' with type='Beta' %}</button>

        <button class="tab-button transition-all hover:opacity-80" data-tab="vip" role="tab" onclick="switchTab('vip')">{% include 'strategies/include/strategy_badge.html' with type='VIP' %}</button>
      </nav>
    </div>

    <!-- Tab Content -->
    <div class="tab-contents">
      <!-- Free Tab -->
      <div class="tab-content hidden grid-cols-1 sm:grid-cols-2 gap-4" data-tab-content="free" id="access-list-Free">
        {% include 'profile_user/include/access_list_strategies.html' with premium='Free' strategies=free_strategies %}
      </div>

      <!-- Premium Tab -->
      <div class="tab-content hidden grid-cols-1 sm:grid-cols-2 gap-4" data-tab-content="premium" id="access-list-Premium">
        {% include 'profile_user/include/access_list_strategies.html' with premium='Premium' strategies=premium_strategies %}
      </div>

      <!-- Beta Tab -->
      <div class="tab-content hidden grid-cols-1 sm:grid-cols-2 gap-4" data-tab-content="beta" id="access-list-Beta">
        {% include 'profile_user/include/access_list_strategies.html' with premium='Beta' strategies=beta_strategies %}
      </div>

      <!-- VIP Tab -->
      <div class="tab-content hidden grid-cols-1 sm:grid-cols-2 gap-4" data-tab-content="vip" id="access-list-VIP">
        {% include 'profile_user/include/access_list_strategies.html' with premium='VIP' strategies=vip_strategies %}
      </div>
    </div>

    <!-- Tab Switching Script -->
    <script>
      function switchTab(tabName) {
        // Remove active class from all buttons
        document.querySelectorAll('.tab-button').forEach((btn) => {
          btn.classList.remove('active')
          btn.style.opacity = '0.6'
        })
      
        document.querySelectorAll('.tab-content').forEach((content) => {
          content.classList.remove('active')
          content.classList.add('hidden')
          content.style.display = 'none'
        })
      
        // Add active class to clicked button
        const activeButton = document.querySelector(`[data-tab="${tabName}"]`)
        activeButton.classList.add('active')
        activeButton.style.opacity = '1'
      
        // Show corresponding content
        const activeContent = document.querySelector(`[data-tab-content="${tabName}"]`)
        activeContent.classList.remove('hidden')
        activeContent.classList.add('active')
        activeContent.style.display = 'grid'
      }
      
      // Initialize on page load
      document.addEventListener('DOMContentLoaded', function () {
        switchTab('free')
      })
    </script>
  </section>
{% endif %}
