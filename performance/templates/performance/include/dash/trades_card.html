{% load custom_tags %}
{% load custom_filters %}

<div class="bg-text/5 rounded-xl p-4">
  <div class="flex items-center justify-between mb-4">
    <h4 class="text-sm font-semibold text-title/80 flex items-center gap-2">
      {% if dot_color %}
        <span class="w-3 h-3 rounded-full {{ dot_color }}"></span>
      {% endif %}
      {{ title }}
    </h4>
    <span class="text-xs {{ badge_bg|default:'bg-profit/10' }} {{ badge_text|default:'text-profit' }} px-2 py-0.5 rounded-full">{{ win_rate|default:'0' }}% WR</span>
  </div>

  <div class="space-y-3">
    <div class="flex justify-between items-center">
      <span class="text-xs text-text/60">Trades</span>
      <span class="text-sm font-medium text-text/80">{{ value|default:'0' }}</span>
    </div>
    <div class="hidden sm:flex justify-between items-center">
      <span class="text-xs text-text/60">Winners</span>
      <span class="text-sm font-medium text-profit">{{ win|default:'0' }}</span>
    </div>
    <div class="hidden sm:flex justify-between items-center">
      <span class="text-xs text-text/60">Losers</span>
      <span class="text-sm font-medium text-loss">{{ loss|default:'0' }}</span>
    </div>

    {# Win/Loss Bar #}
    <div class="mt-2">
      <div class="flex h-2 rounded-full overflow-hidden bg-text/10">
        {% if value > 0 %}
          <div class="bg-profit" style="width: {{ win_rate|default:'0' }}%"></div>
          <div class="bg-loss" style="width: {{ win_rate|default:'0'|differance:100 }}%"></div>
        {% endif %}
      </div>
      <div class="flex justify-between mt-1">
        <span class="text-xs text-profit">{{ win|default:'0' }} W</span>
        <span class="text-xs text-loss">{{ loss|default:'0' }} L</span>
      </div>
    </div>
  </div>
</div>
