<div class="mb-4">
  {% if comments|length > 0 %}
    {% if user.is_authenticated and strategy in user_profile.strategies.all %}
    <button
      class="btn-text text-sm font-semibold underlinei"
      id="add-comment-btn"
      onclick='toggleForm("add-comment-btn", "add-comment-form")'
    >
      Share Your Thoughts
    </button>
    {% elif user.is_authenticated and not has_subscription and strategy.premium != 'VIP' %}
    {% comment %} <button
      class="btn-text text-sm font-semibold underlinei"
      onclick="openModel('upgrade-modal', false);"
    >
      Share Your Thoughts
    </button> {% endcomment %}
    {% endif %}
  {% endif %}
  <form
    class="hidden"
    id="add-comment-form"
    hx-post="{% url 'submit_comment' strategy.id %}"
    hx-target="#commentsDiv"
    enctype="multipart/form-data"
  >
    {% csrf_token %}
    <label for="chat" class="sr-only">Your message</label>
    <div class="flex px-0 py-3 rounded-lg bg-background brightness-125i">
      <div class="self-stretch flex flex-col">
        <button
          type="button"
          onclick='toggleForm("add-comment-btn", "add-comment-form")'
          class="btn-icon"
        >
          <svg
            class="w-4 h-4"
            aria-hidden="true"
            stroke-width="0"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill="currentColor"
              stroke="currentColor"
              stroke-width="2"
              d="M3,3 L21,21 M3,21 L21,3"
            ></path>
          </svg>
        </button>
        <input
          id="add-comment-imgs"
          class="hidden"
          type="file"
          accept="image/*"
          name="images"
          multiple
          onchange="showSelectedFiles('add-comment-imgs' ,'comment-file-list')"
        />
        <button
          onclick='showSelectImgs("add-comment-imgs")'
          type="button"
          class="mt-auto btn-icon"
        >
          <svg
            class="w-5 h-5"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 20 18"
          >
            <path
              fill="currentColor"
              d="M13 5.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0ZM7.565 7.423 4.5 14h11.518l-2.516-3.71L11 13 7.565 7.423Z"
            />
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M18 1H2a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1Z"
            />
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M13 5.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0ZM7.565 7.423 4.5 14h11.518l-2.516-3.71L11 13 7.565 7.423Z"
            />
          </svg>
          <span class="sr-only">Upload image</span>
        </button>
      </div>
      <textarea
        name="description"
        rows="5"
        class="block mx-1.5 p-2 w-full text-sm input-text"
        placeholder="Your thoughts on this strategy and how we can improve it..."
      ></textarea>
      <button
        onclick="openLoader('', '-add-comment', 'inline-flex')"
        id="btn-add-comment"
        type="submit"
        class="inline-flex justify-center p-2 text-secondary rounded-full cursor-pointer mt-auto"
      >
        <svg
          class="w-5 h-5 rotate-90"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 18 20"
        >
          <path
            d="m17.914 18.594-8-18a1 1 0 0 0-1.828 0l-8 18a1 1 0 0 0 1.157 1.376L8 18.281V9a1 1 0 0 1 2 0v9.281l6.758 1.689a1 1 0 0 0 1.156-1.376Z"
          />
        </svg>
        <span class="sr-only">Send message</span>
      </button>
      <button
        id="spinner-add-comment"
        type="button"
        class="hidden justify-center p-2 text-secondary rounded-full cursor-pointer mt-auto"
      >
       {% include 'svg/spinner.html' with class='h-5' %}
      </button>
    </div>

    <div id="add-comment-form-errors"></div>
    <div id="comment-file-list" class="max-w-full"></div>
  </form>
</div>
