{% extends 'emails/base_email.html' %}

{% block title %}
  Strategy Subscription Overdue - IsAlgo
{% endblock %}

{% block preheader %}
  Your {{ strategy_name }} subscription payment is overdue. Action required.
{% endblock %}

{% block content %}
  <!-- Icon -->
  <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
    <tr>
      <td align="center" style="padding-bottom: 24px;">
        <table align="center" role="presentation" width="48" cellspacing="0" cellpadding="0" border="0" style="margin: 0 auto;">
          <tr>
            <td style="text-align: center; line-height: 48px; width: 48px; height: 48px; border-radius: 8px; background-color: rgba(217, 119, 6, 0.1);">
              <img src="{{ dark_icons_url }}strategy.png" alt="" style="width: 24px; height: 24px; vertical-align: middle;" />
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>

  <!-- Heading -->
  <h2 style="margin: 0 0 8px; text-align: center; font-size: 24px; font-weight: 700; color: #000000;">Subscription Overdue</h2>
  <p style="margin: 0 0 32px; text-align: center;">
    <span style="display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 13px; font-weight: 500; background-color: rgba(217, 119, 6, 0.1); color: #d97706; border: 1px solid rgba(217, 119, 6, 0.2);">Action Required</span>
  </p>

  <!-- Message -->
  <p style="margin: 0 0 16px; font-size: 15px; line-height: 1.6; color: #333333;">
    We were unable to process the payment for your <strong>{{ strategy_name }}</strong> strategy subscription. This may be due to insufficient funds, an expired card, or an issue with your payment method.
  </p>

  <p style="margin: 0 0 16px; font-size: 15px; line-height: 1.6; color: #333333;">Please update your payment as soon as possible to avoid losing access to this strategy.</p>

  <!-- Warning card -->
  <div style="background-color: #f9fafb; border-radius: 8px; padding: 20px; border: 1px solid #e5e7eb; margin: 24px 0;">
    <p style="margin: 0 0 12px; font-size: 14px; font-weight: 600; color: #000000;">What happens if unpaid:</p>
    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
      <tr>
        <td style="padding: 8px 0; font-size: 14px; color: #333333; line-height: 1.5;">
          <span style="color: #d97706; font-weight: 600; margin-right: 8px;">•</span> Your access to {{ strategy_name }} will be removed
        </td>
      </tr>
      <tr>
        <td style="padding: 8px 0; font-size: 14px; color: #333333; line-height: 1.5;">
          <span style="color: #d97706; font-weight: 600; margin-right: 8px;">•</span> All linked automations will be stopped
        </td>
      </tr>
      <tr>
        <td style="padding: 8px 0; font-size: 14px; color: #333333; line-height: 1.5;">
          <span style="color: #d97706; font-weight: 600; margin-right: 8px;">•</span> Open positions will no longer be managed
        </td>
      </tr>
    </table>
  </div>

  <p style="margin: 0 0 28px; font-size: 15px; line-height: 1.6; color: #333333;">Update your payment now to keep your strategy running. If you're experiencing any issues, our support team is here to help.</p>

  <!-- CTA Buttons -->
  <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
    <tr>
      <td align="center" style="padding-bottom: 12px;">
        <table role="presentation" cellspacing="0" cellpadding="0" border="0" style="margin: 0 auto;">
          {% with btn_url=strategy_url btn_text='Update Payment' %}
            {% include 'emails/components/button_primary.html' %}
          {% endwith %}
        </table>
      </td>
    </tr>
    <tr>
      <td align="center">
        <table role="presentation" cellspacing="0" cellpadding="0" border="0" style="margin: 0 auto;">
          {% with btn_url='mailto:'|add:support_email|add:'?subject=Strategy%20Subscription%20Overdue' btn_text='Contact Support' %}
            {% include 'emails/components/button_secondary.html' %}
          {% endwith %}
        </table>
      </td>
    </tr>
  </table>
{% endblock %}
