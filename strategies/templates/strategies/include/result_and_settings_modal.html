{% load custom_filters %}

<div
  id="result-modal-{{result.id}}"
  class="fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full"
>
  <div id="content-result-modal-{{result.id}}" class="relative w-full max-w-xl max-h-full overflow-y-scroll scrollbar-hide">
    <!-- Modal content -->
    <div class="relative bg-background rounded-lg shadow">
      <!-- Modal header -->
      <div
        class="flex items-center justify-between p-4 rounded-t sticky top-0 bg-background z-50"
      >
        <h3 class="   text-lg sm:text-xl font-semibold text-text">{{result.performance.broker}}:{{result.pair}}</h3>
        <button
          type="button"
          onclick="hideModel('result-modal-{{result.id}}')"
          class="text-title/60 bg-transparent hover:text-title rounded-lg text-sm p-1.5 ml-auto inline-flex items-center"
        >
          <svg
            class="w-5 h-5"
            fill="currentColor"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
              clip-rule="evenodd"
            ></path>
          </svg>
        </button>
      </div>
      <!-- Modal body -->

    <div class="w-full mx-auto px-2.5 max-w-sm mb-3 ">
      <div class="w-full font-semibold grid grid-cols-2 gap-1 border rounded-md border-text/70 p-1">
        <button
          id="r-{{result.id}}-result-btn"
          onclick='swapDivBtn("r-{{result.id}}-settings", "r-{{result.id}}-result")'
          class="inline-block px-2 py-1 text-sm rounded-md text-background  bg-text transition-all"
        >
          <!-- <svg class="h-5 aspect-square" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 256 256"  xmlns="http://www.w3.org/2000/svg"><path d="M76,152a36,36,0,1,0,36,36A36,36,0,0,0,76,152Zm0,56a20,20,0,1,1,20-20A20,20,0,0,1,76,208ZM42.34,106.34,56.69,92,42.34,77.66A8,8,0,0,1,53.66,66.34L68,80.69,82.34,66.34A8,8,0,0,1,93.66,77.66L79.31,92l14.35,14.34a8,8,0,0,1-11.32,11.32L68,103.31,53.66,117.66a8,8,0,0,1-11.32-11.32Zm187.32,96a8,8,0,0,1-11.32,11.32L204,199.31l-14.34,14.35a8,8,0,0,1-11.32-11.32L192.69,188l-14.35-14.34a8,8,0,0,1,11.32-11.32L204,176.69l14.34-14.35a8,8,0,0,1,11.32,11.32L215.31,188Zm-45.19-89.51c-6.18,22.33-25.32,41.63-46.53,46.93A8.13,8.13,0,0,1,136,160a8,8,0,0,1-1.93-15.76c15.63-3.91,30.35-18.91,35-35.68,3.19-11.5,3.22-29-14.71-46.9L152,59.31V80a8,8,0,0,1-16,0V40a8,8,0,0,1,8-8h40a8,8,0,0,1,0,16H163.31l2.35,2.34C183.9,68.59,190.58,90.78,184.47,112.83Z"></path></svg> -->
          Performance
        </button>
        <button
          onclick='swapDivBtn("r-{{result.id}}-result", "r-{{result.id}}-settings")'
          id="r-{{result.id}}-settings-btn"
          class="inline-block px-2 py-1 text-sm rounded-md hover:text-background text-text bg-transparent hover:bg-text transition-all"
        >
        <!-- <svg class="h-5 aspect-square" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M2 12H4V21H2V12ZM5 14H7V21H5V14ZM16 8H18V21H16V8ZM19 10H21V21H19V10ZM9 2H11V21H9V2ZM12 4H14V21H12V4Z"></path></svg> -->
        Properties
        </button>
      </div>
    </div>
      <!-- Profits -->
      <div id="r-{{result.id}}-result" class="px-6 py-4 space-y-6">

        <div class="grid grid-cols-2 sm:grid-cols-3 gap-3 mb-3">
          <div class="flex items-center gap-2">
            <svg class="w-5 h-5 text-text/60" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
            <div>
              <p class="text-sm text-text/60">Symbol</p>
              <p class="font-medium text-text">{{result.performance.pair}}</p>
            </div>
          </div>
          <div class="flex items-center gap-2">
            <svg class="w-5 h-5 text-text/60" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"/><path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"/><path d="M10 6h4"/><path d="M10 10h4"/><path d="M10 14h4"/><path d="M10 18h4"/></svg>
            <div>
              <p class="text-sm text-text/60">Broker</p>
              <p class="font-medium text-text">{{result.performance.broker}}</p>
            </div>
          </div>
          <div class="flex items-center gap-2">
            <svg class="w-5 h-5 text-text/60" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1"/><path d="M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4"/></svg>
            <div>
              <p class="text-sm text-text/60">Initial Capital</p>
              <p class="font-medium text-text">{{result.performance.initial_capital}}</p>
            </div>
          </div>
          <div class="flex items-center gap-2">
            <svg class="w-5 h-5 text-text/60" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
            <div>
              <p class="text-sm text-text/60">Timeframe</p>
              <p class="font-medium text-text">{{result.performance.time_frame_int}} {{result.performance.time_frame}}</p>
            </div>
          </div>
          <div class="flex items-center gap-2">
            <svg class="w-5 h-5 text-text/60" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12"/></svg>
            <div>
              <p class="text-sm text-text/60">From</p>
              <p class="font-medium text-text">{{result.test_start_at|date:'M d Y'}}</p>
              <p class="font-light text-xs text-text">{{result.test_start_at|date:'H:i'}}</p>
            </div>
          </div>
          <div class="flex items-center gap-2">
            <svg class="w-5 h-5 text-text/60" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 9.5 16"/></svg>
            <div>
              <p class="text-sm text-text/60">To</p>
              <p class="font-medium text-text">{{result.test_end_at|date:'M d Y'}}</p>
              <p class="font-light text-xs text-text">{{result.test_end_at|date:'H:i'}}</p>
            </div>
          </div>
        </div>

        <div class="w-full">

          <p class="text-sm text-text/60 flex items-center gap-2 mb-1.5">
            <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="10" x2="14" y1="2" y2="2"/><line x1="12" x2="15" y1="14" y2="11"/><circle cx="12" cy="14" r="8"/></svg>
            Duration
          </p>
          <div class="w-full bg-text/20 rounded-md mb-1">
            <div
              class="flex items-center justify-center truncate gap-1.5 bg-text/40 text-xs py-[0.1rem] font-semibold text-background text-center px-0.25 leading-none rounded-md"
              style="width: {{ result.test_start_at|map_months_to_number:result.test_end_at }}%"
              >
              {{ result.test_start_at|period_in_months_years:result.test_end_at }}
            </div>
          </div>
        </div>


        <div class=" w-full max-w-xl mx-auto grid grid-cols-3 gap-1 border rounded-md border-text/30 p-1">
          <button
            id="btn-result-all-{{result.id}}"
            class="flex items-center justify-center gap-1.5 text-sm font-bold  text-text rounded-md bg-text/30 py-1.5 hover:bg-text/30  transition-all"
            onclick="handleThreeSection(this, 'result-all-{{result.id}}', 'result-long-{{result.id}}', 'result-short-{{result.id}}', ['bg-text/30'])"
          >
            All
          </button>
          <button
            id="btn-result-long-{{result.id}}"
            class="flex items-center justify-center gap-1.5 text-sm font-bold text-title rounded-md py-1.5 hover:bg-text/30 transition-all"
            onclick="handleThreeSection(this, 'result-all-{{result.id}}', 'result-long-{{result.id}}', 'result-short-{{result.id}}', ['bg-text/30'])"
          >
            Long
          </button>
          <button
            id="btn-result-short-{{result.id}}"
            class="flex items-center justify-center gap-1.5 text-sm font-bold text-title rounded-md py-1.5 hover:bg-text/30 transition-all" 
            onclick="handleThreeSection(this, 'result-all-{{result.id}}', 'result-long-{{result.id}}', 'result-short-{{result.id}}', ['bg-text/30'])"
          >
            Short
          </button>
        </div>

        <article id="section-result-all-{{result.id}}" class="">
          <section class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="rounded-lg bg-profit/10 p-4">
              <div class="flex items-center gap-2 mb-1">
                <svg class="w-4 h-4 text-profit" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>
                <span class="text-sm text-profit">Net Profit</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-profit">
                  {{result.performance.net_profit|format_profit|safe}}
                </span>
                <span class="text-sm font-semibold text-profit">
                  {{result.performance.net_profit_percentage|format_profit|safe}}%
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-profit/10 p-4">
              <div class="flex items-center gap-2 mb-1">
                <svg class="w-4 h-4 text-profit" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
                <span class="text-sm text-profit">Gross Profit</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-profit">
                  {{result.performance.gross_profit|format_profit|safe}}
                </span>
                <span class="text-sm font-semibold text-profit">
                  {{result.performance.gross_profit_percentage|format_profit|safe}}%
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-loss/10 p-4">
              <div class="flex items-center gap-2 mb-1">
                <svg class="w-4 h-4 text-loss" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 17 13.5 8.5 8.5 13.5 2 7"/><polyline points="16 17 22 17 22 11"/></svg>
                <span class="text-sm text-loss">Gross Loss</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-loss">
                  {{result.performance.gross_loss|format_profit|safe}}
                </span>
                <span class="text-sm font-semibold text-loss">
                  {{result.performance.gross_loss_percentage|format_profit|safe}}%
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-primary/10 p-4">
              <div class="flex items-center gap-2 mb-1">
                <svg class="w-4 h-4 text-primary" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/></svg>
                <span class="text-sm text-primary">Profit Factor</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-primary">
                  {{result.performance.profit_factor|format_profit|safe}}
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-profit/10 p-4">
              <div class="flex items-center gap-2 mb-1">
                <svg class="w-4 h-4 text-profit" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526"/><circle cx="12" cy="8" r="6"/></svg>
                <span class="text-sm text-profit">Win rate</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-profit">
                  {{result.performance.win_loss_avg|format_profit|safe}}
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-loss/10 p-4">
              <div class="flex items-center gap-2 mb-1">
                <svg class="w-4 h-4 text-loss" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 17 13.5 8.5 8.5 13.5 2 7"/><polyline points="16 17 22 17 22 11"/></svg>
                <span class="text-sm text-loss">Max Drawdown</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-loss">
                  {{result.performance.max_drawdown|format_profit|safe}}
                </span>
                <span class="text-sm font-semibold text-loss">
                  {{result.performance.max_drawdown_percentage|format_profit|safe}}%
                </span>
              </div>
            </div>
          </section>

          <section class="grid grid-cols-1 md:grid-cols-3 gap-2 mt-4">
            <div class="rounded-lg bg-primary/10 p-3">
              <div class="flex items-center gap-2 mb-1">
                <span class="text-sm text-primary">Total Trades</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-primary">
                  {{result.performance.total_trade}}
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-profit/10 p-3">
              <div class="flex items-center gap-2 mb-1">
                <span class="text-sm text-profit">Win Trades</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-profit">
                  {{result.performance.winning_total_trade}}
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-loss/10 p-3">
              <div class="flex items-center gap-2 mb-1">
                <span class="text-sm text-loss">Loss Trades</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-loss">
                  {{result.performance.losing_total_trade}}
                </span>
              </div>
            </div>
          </section>
        </article>

        <article id="section-result-long-{{result.id}}" class="hidden">
          <section class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="rounded-lg bg-profit/10 p-4">
              <div class="flex items-center gap-2 mb-1">
                <svg class="w-4 h-4 text-profit" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>
                <span class="text-sm text-profit">Net Profit</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-profit">
                  {{result.performance.net_profit_long|format_profit|safe}}
                </span>
                <span class="text-sm font-semibold text-profit">
                  {{result.performance.net_profit_percentage_long|format_profit|safe}}%
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-profit/10 p-4">
              <div class="flex items-center gap-2 mb-1">
                <svg class="w-4 h-4 text-profit" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
                <span class="text-sm text-profit">Gross Profit</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-profit">
                  {{result.performance.gross_profit_long|format_profit|safe}}
                </span>
                <span class="text-sm font-semibold text-profit">
                  {{result.performance.gross_profit_percentage_long|format_profit|safe}}%
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-loss/10 p-4">
              <div class="flex items-center gap-2 mb-1">
                <svg class="w-4 h-4 text-loss" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 17 13.5 8.5 8.5 13.5 2 7"/><polyline points="16 17 22 17 22 11"/></svg>
                <span class="text-sm text-loss">Gross Loss</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-loss">
                  {{result.performance.gross_loss_long|format_profit|safe}}
                </span>
                <span class="text-sm font-semibold text-loss">
                  {{result.performance.gross_loss_percentage_long|format_profit|safe}}%
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-primary/10 p-4">
              <div class="flex items-center gap-2 mb-1">
                <svg class="w-4 h-4 text-primary" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/></svg>
                <span class="text-sm text-primary">Profit Factor</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-primary">
                  {{result.performance.profit_factor_long|format_profit|safe}}
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-profit/10 p-4">
              <div class="flex items-center gap-2 mb-1">
                <svg class="w-4 h-4 text-profit" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526"/><circle cx="12" cy="8" r="6"/></svg>
                <span class="text-sm text-profit">Win rate</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-profit">
                  {{result.performance.win_loss_avg_long|format_profit|safe}}
                </span>
              </div>
            </div>
          </section>

          <section class="grid grid-cols-1 md:grid-cols-3 gap-2 mt-4">
            <div class="rounded-lg bg-primary/10 p-3">
              <div class="flex items-center gap-2 mb-1">
                <span class="text-sm text-primary">Total Trades</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-primary">
                  {{result.performance.total_trade_long}}
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-profit/10 p-3">
              <div class="flex items-center gap-2 mb-1">
                <span class="text-sm text-profit">Win Trades</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-profit">
                  {{result.performance.winning_total_trade_long}}
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-loss/10 p-3">
              <div class="flex items-center gap-2 mb-1">
                <span class="text-sm text-loss">Loss Trades</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-loss">
                  {{result.performance.losing_total_trade_long}}
                </span>
              </div>
            </div>
          </section>
        </article>

        <article id="section-result-short-{{result.id}}" class="hidden">
          <section class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="rounded-lg bg-profit/10 p-4">
              <div class="flex items-center gap-2 mb-1">
                <svg class="w-4 h-4 text-profit" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>
                <span class="text-sm text-profit">Net Profit</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-profit">
                  {{result.performance.net_profit_short|format_profit|safe}}
                </span>
                <span class="text-sm font-semibold text-profit">
                  {{result.performance.net_profit_percentage_short|format_profit|safe}}%
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-profit/10 p-4">
              <div class="flex items-center gap-2 mb-1">
                <svg class="w-4 h-4 text-profit" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
                <span class="text-sm text-profit">Gross Profit</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-profit">
                  {{result.performance.gross_profit_short|format_profit|safe}}
                </span>
                <span class="text-sm font-semibold text-profit">
                  {{result.performance.gross_profit_percentage_short|format_profit|safe}}%
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-loss/10 p-4">
              <div class="flex items-center gap-2 mb-1">
                <svg class="w-4 h-4 text-loss" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 17 13.5 8.5 8.5 13.5 2 7"/><polyline points="16 17 22 17 22 11"/></svg>
                <span class="text-sm text-loss">Gross Loss</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-loss">
                  {{result.performance.gross_loss_short|format_profit|safe}}
                </span>
                <span class="text-sm font-semibold text-loss">
                  {{result.performance.gross_loss_percentage_short|format_profit|safe}}%
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-primary/10 p-4">
              <div class="flex items-center gap-2 mb-1">
                <svg class="w-4 h-4 text-primary" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/></svg>
                <span class="text-sm text-primary">Profit Factor</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-primary">
                  {{result.performance.profit_factor_short|format_profit|safe}}
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-profit/10 p-4">
              <div class="flex items-center gap-2 mb-1">
                <svg class="w-4 h-4 text-profit" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526"/><circle cx="12" cy="8" r="6"/></svg>
                <span class="text-sm text-profit">Win rate</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-profit">
                  {{result.performance.win_loss_avg_short|format_profit|safe}}
                </span>
              </div>
            </div>
          </section>

          <section class="grid grid-cols-1 md:grid-cols-3 gap-2 mt-4">
            <div class="rounded-lg bg-primary/10 p-3">
              <div class="flex items-center gap-2 mb-1">
                <span class="text-sm text-primary">Total Trades</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-primary">
                  {{result.performance.total_trade_short}}
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-profit/10 p-3">
              <div class="flex items-center gap-2 mb-1">
                <span class="text-sm text-profit">Win Trades</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-profit">
                  {{result.performance.winning_total_trade_short}}
                </span>
              </div>
            </div>
            <div class="rounded-lg bg-loss/10 p-3">
              <div class="flex items-center gap-2 mb-1">
                <span class="text-sm text-loss">Loss Trades</span>
              </div>
              <div class="flex items-baseline gap-2">
                <span class="text-xl font-bold text-loss">
                  {{result.performance.losing_total_trade_short}}
                </span>
              </div>
            </div>
          </section>
        </article>

      </div>
      <!-- Settings -->
      <div id="r-{{result.id}}-settings" class="hidden p-6 space-y-3">
        {% for item in result.settings %}
          {% with group_name=item.key group_value=item.value %}
                <div class="mb-6">
                  <h6 class="text-text text-xs pb-4">{{group_name}}</h6>
                  <div class="pb-4 ">
                  
                  {% for line in group_value %}
                  <div class=" my-3 max-w-full " >
                    {% for set in line %}
                    <!-- {{set}} -->
                        <div class="mr-3 inline-flex items-center justify-center align-middle ">
                          {% if set.type == 'boolean' %}
                            <input disabled name="settings_{{ set.name }}" id="id_settings_{{ set.name }}" type="checkbox" {% if set.default_value == 'true' %}checked{%endif%} value="{% if set.default_value == 'true' %}true{%else%}false{%endif%}" class="mr-2 w-4 h-4 input-checkbox">
                          {% endif %} 
                            <label for="id_settings_{{ set.name }}" class="block text-sm font-medium text-title whitespace-nowrap">{{ set.display_name }}</label>
                          
                          {% if set.type != 'boolean'  %}
                            <span class="ml-2 bg-text text-sm font-semibold text-background px-1.5 rounded">{{ set.default_value|escape }}</span>
                          {% endif %}
                          <span class="text-text">
                          </span>
                        </div>
                      {% endfor %}
                    </div>
                  {% endfor %}
                </div>
              </div>
              {% endwith %}
          {% endfor %}
      </div>
    </div>
  </div>
</div>
